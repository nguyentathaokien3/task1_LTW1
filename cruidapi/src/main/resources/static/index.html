<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quáº£n lÃ½ sinh viÃªn</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #d4fc79, #96e6a1, #fbc2eb);
    margin: 0;
    padding: 0;
}
h2 {
    text-align: center;
    color: #2f855a;
    margin-top: 20px;
}
.container {
    width: 90%;
    max-width: 1100px;
    margin: 20px auto;
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}
form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}
label {
    font-weight: bold;
    color: #2f855a;
}
input {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
}
.full { grid-column: 1 / span 2; }
button {
    padding: 10px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}
.btn-save { background-color: #38a169; color: white; }
.btn-edit { background-color: #f687b3; color: white; }
.btn-delete { background-color: #e53e3e; color: white; }
table {
    width: 100%;
    border-collapse: collapse;
    border-radius: 10px;
    overflow: hidden;
}
thead {
    background-color: #38a169;
    color: white;
}
th, td {
    padding: 10px;
    text-align: center;
}
tbody tr:nth-child(even) { background-color: #f0fff4; }
tbody tr:hover { background-color: #fed7e2; }
</style>
</head>

<body>

<h2>ğŸŒ¸ QUáº¢N LÃ SINH VIÃŠN ğŸŒ¿</h2>

<div class="container">

<input type="text" id="searchName"
placeholder="ğŸ” TÃ¬m sinh viÃªn theo tÃªn..."
onkeyup="searchStudent()"
style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-bottom:15px;">

<form id="studentForm">
<input type="hidden" id="id">

<div>
<label>TÃªn sinh viÃªn</label>
<input type="text" id="name" required>
</div>

<div>
<label>Email</label>
<input type="email" id="email" required>
</div>

<div>
<label>SÄT</label>
<input type="text" id="phone" required>
</div>

<div>
<label>Lá»›p</label>
<input type="text" id="className" required>
</div>

<div class="full">
<button class="btn-save">ğŸ’¾ LÆ°u sinh viÃªn</button>
</div>
</form>

<table>
<thead>
<tr>
<th>ID</th>
<th>TÃªn</th>
<th>Email</th>
<th>SÄT</th>
<th>Lá»›p</th>
<th>HÃ nh Ä‘á»™ng</th>
</tr>
</thead>
<tbody id="studentTable"></tbody>
</table>

</div>

<script>
const api = "http://localhost:8080/api/students";

function loadStudents(){
fetch(api)
.then(res => res.json())
.then(showTable);
}

function showTable(data){
let rows="";
data.forEach(s=>{
rows+=`
<tr>
<td>${s.id}</td>
<td>${s.name}</td>
<td>${s.email}</td>
<td>${s.phone}</td>
<td>${s.className}</td>
<td>
<button class="btn-edit" onclick="editStudent(${s.id})">Sá»­a</button>
<button class="btn-delete" onclick="deleteStudent(${s.id})">XÃ³a</button>
</td>
</tr>`;
});
document.getElementById("studentTable").innerHTML=rows;
}

document.getElementById("studentForm").onsubmit=e=>{
e.preventDefault();
let id=document.getElementById("id").value;
let student={
name: name.value,
email: email.value,
phone: phone.value,
className: className.value
};
fetch(id?api+"/"+id:api,{
method: id?"PUT":"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(student)
}).then(loadStudents);
studentForm.reset();
id.value="";
};

function editStudent(id){
fetch(api+"/"+id).then(r=>r.json()).then(s=>{
document.getElementById("id").value=s.id;
name.value=s.name;
email.value=s.email;
phone.value=s.phone;
className.value=s.className;
});
}

function deleteStudent(id){
if(confirm("XÃ³a sinh viÃªn?")){
fetch(api+"/"+id,{method:"DELETE"}).then(loadStudents);
}
}

function searchStudent(){
let name=document.getElementById("searchName").value;
if(name.trim()===""){
loadStudents();
return;
}
fetch(api+"/search?name="+encodeURIComponent(name))
.then(res=>res.json())
.then(showTable);
}

loadStudents();
</script>

</body>
</html>
